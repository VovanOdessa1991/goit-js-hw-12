{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const refs = {\n  formIMG: document.querySelector('form'),\n  galery: document.querySelector('.galery__list'),\n  loader: document.querySelector('.loader'),\n  preLoader: document.querySelector('.preLoader'),\n  nextImg: document.querySelector('.nextImg'),\n};\n","import { refs } from './refs';\nexport function render(img) {\n  const list = img\n    .map(\n      ({ webformatURL, views, comments, likes, downloads } = img) =>\n        `<li class=\"galery__item\">\n          <div class=\"galery__item-div\">\n            <a href=\"${webformatURL}\">\n              <img\n                class=\"galery-img\"\n                src = \"${webformatURL}\"\n                alt=\"\"\n\n              />\n            </a>\n            <div class=\"galery__info\">\n              <ul class=\"gallery__info-list\">\n                <!-- ! подпись под карточкой -->\n\n                <li class=\"galeri__info-item\">\n                  <p class=\"galeri__info-header\">Likes</p>\n                  <p class=\"galeri__ingo-footer\">${likes}</p>\n                </li>\n                <li class=\"galeri__info-item\">\n                  <p class=\"galeri__info-header\">Views</p>\n                  <p class=\"galeri__ingo-footer\">${views}</p>\n                </li>\n                <li class=\"galeri__info-item\">\n                  <p class=\"galeri__info-header\">Comments</p>\n                  <p class=\"galeri__ingo-footer\">${comments}</p>\n                </li>\n                <li class=\"galeri__info-item\">\n                  <p class=\"galeri__info-header\">Downloads</p>\n                  <p class=\"galeri__ingo-footer\">${downloads}</p>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>`\n    )\n    .join('');\n\n  refs.galery.insertAdjacentHTML('beforeend', list);\n}\n\nexport function clearCiild(perents) {\n  perents.innerHTML = '';\n\n  //!  Old methods\n\n  // const myNode = document.getElementById(`${perents}`);\n  // while (perents.firstChild) {\n  //   perents.removeChild(perents.lastChild);\n  // }\n}\n// Old method\n// export function print(objeckt, img, likes, vievs, comments, downloads) {\n//   const list = render(img, likes, vievs, comments, downloads);\n// }\n","import Axios from 'axios';\n\n// axios.defaults.baseURL = '';\n\n// const BASE_URL = 'https://pixabay.com/api/';\n// const USERkEY = '?key=44446882-f589529ab68d1d31e6487214d';\n\nexport async function getAllBooks(q, page = '1', pages = 15) {\n  // const par = {\n  //   q: q,\n  //   page: page,\n  //   per_page: pages,\n  // };\n  let axios = Axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    headers: {},\n    params: {\n      key: '44446882-f589529ab68d1d31e6487214d',\n      q: q,\n      page: page,\n      per_page: pages,\n    },\n  });\n  // const res = await axios.get('');\n  try {\n    const res = await axios.get('');\n    return res.data;\n  } catch (err) {\n    console.log(err);\n  }\n\n  // !Перевірка Аксіоса(про всяк випадок)\n  // .then(function (response) {\n  // console.log(response.data.hits);\n  // console.log(response.status);\n  // console.log(response.statusText);\n  // console.log(response.headers);\n  // console.log(response.config);\n  // })\n\n  // ! Старий метод (про всяк випадок)\n  // const END_POINT = `&q=${param}&min_width=2450`;\n  // const params = `&image_type=photo&orientation=horizontal&safesearch=true&per_page=${pages}&page=${page}`;\n\n  // const url = `${BASE_URL}${USERkEY}${END_POINT}${params}`;\n\n  // const headers = {};\n\n  // const promiseIMG = fetch(url);\n\n  // return promiseIMG\n  //   .then(data => data.json())\n\n  //   .catch(() => {\n  //     console.log('Error');\n  //   });\n}\n\n//  ПРимер! Извлечение фотографий «желтых цветов». Поисковый запросддолжен быть закодирован в URL:\n\n// https://pixabay.com/api/?key=44446882-f589529ab68d1d31e6487214d&q=yellow+flowers&image_type=photo\n","import { render, clearCiild } from './js/render-functions';\nimport { getAllBooks } from './js/pixabay-api';\nimport { refs } from './js/refs';\n\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nhideLoader();\n// !номер текущей страницы\nlet pages = 1;\n// !Общее количество  бесплатных картинок.\nlet totalHits;\n// ! Имя картинок\nlet nameIMG = '';\n// !! Для теста сколь ко картинок за раз добавить\nconst numberADDImg = 15;\n// ! Проверка\nlet totalHitsFull = 0;\n\nrefs.formIMG.addEventListener('submit', seartchIMG);\nrefs.nextImg.addEventListener('click', nextImg);\nlet gallery = new SimpleLightbox('.galery__list a');\n\n// ! Поиск Картинок в перший раз\nasync function seartchIMG(e) {\n  e.preventDefault();\n  nameIMG = e.target.name.value.trim();\n\n  // !якщо пустий рядок\n  if (nameIMG === '') {\n    clearCiild(refs.galery);\n    iziToast.info({\n      title: 'Пустой РЯДОК!!',\n    });\n    return;\n  }\n\n  showLoader();\n  try {\n    const img = await getAllBooks(nameIMG);\n    // || img.totalHits == total\n    // !Якщо нічого не знайшло\n    if (img.hits.length == 0) {\n      hideLoader();\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      clearCiild(refs.galery);\n      nameIMG = '';\n      totalHits = 0;\n      // !!! Костіль почему-то моя функция тут не работает О_о  ---- 147  buttonNeedVisible()\n      // уже нет времени разбираться О_о\n      refs.nextImg.classList.add('hidden');\n\n      return;\n    }\n    pages++;\n\n    clearCiild(refs.galery);\n\n    totalHits = img.totalHits;\n\n    render(img.hits);\n    buttonNeedVisible();\n\n    gallery.refresh();\n    loaderVision();\n    e.target.name.value = '';\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// ! Добавление картинок\nasync function nextImg() {\n  try {\n    // !  Проверка можно ли добавлять картинки\n    if (totalHits <= refs.galery.childNodes.length + numberADDImg) {\n      iziToast.error({\n        title: 'Error',\n        message: 'УСЕ!',\n      });\n\n      const add = totalHits - refs.galery.childNodes.length;\n      // !Єто если уже совсем нельзя\n      if (add <= 0) {\n        iziToast.error({\n          title: 'Error',\n          message: 'STOP!',\n        });\n\n        buttonNeedVisible();\n\n        return;\n      }\n\n      const name = await getAllBooks(nameIMG, pages++, add);\n      render(name.hits);\n      gallery.refresh();\n      scrollEl();\n\n      buttonNeedVisible();\n\n      return;\n    }\n\n    const name = await getAllBooks(nameIMG, pages++, numberADDImg);\n    render(name.hits);\n    gallery.refresh();\n    scrollEl();\n\n    // // ! Чомусь не скролить\n\n    // console.log('ЧоМУЖ не скролиить?');\n    // scrollEl();\n\n    // ! Це вже паніка...\n    // window.scrollBy({\n    //   top: 100,\n    //   left: 100,\n    //   behavior: 'smooth',\n    // });\n    // scrollBy(3000, 0);\n\n    //! обновление галереи\n    // gallery.refresh();\n    // scrollEl();\n    buttonNeedVisible();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// ! Ждун для загрузки картинок\nfunction loaderVision() {\n  const mediaFiles = document.querySelectorAll('img, video');\n  let i = 0;\n\n  Array.from(mediaFiles).forEach(file => {\n    file.onload = () => {\n      i++;\n\n      if (i === mediaFiles.length - 2) {\n        hideLoader();\n      }\n    };\n  });\n}\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n  refs.preLoader.classList.remove('hidden');\n}\nfunction hideLoader() {\n  refs.loader.classList.add('hidden');\n  refs.preLoader.classList.add('hidden');\n  // !ТУТ скролить! але без getBoundingClientRect!\n  // console.log(' Тут скролить... ');\n  // scrollEl();\n}\n\nfunction buttonNeedVisible() {\n  if (totalHits === refs.galery.childNodes.length) {\n    refs.nextImg.classList.add('hidden');\n  } else refs.nextImg.classList.remove('hidden');\n}\n\nasync function scrollEl() {\n  if (!refs.galery.children[0]) {\n    window.scrollBy({\n      top: 500,\n      behavior: 'smooth',\n    });\n    return;\n  }\n  let ppp = refs.galery.children[0];\n\n  //! dblft 480\n  const cildHeight = ppp.getBoundingClientRect().height * 2;\n\n  window.scrollBy({\n    top: cildHeight,\n    behavior: 'smooth',\n  });\n}\n"],"names":["refs","render","img","list","webformatURL","views","comments","likes","downloads","clearCiild","perents","getAllBooks","q","page","pages","axios","Axios","err","hideLoader","totalHits","nameIMG","numberADDImg","seartchIMG","nextImg","gallery","SimpleLightbox","e","iziToast","showLoader","buttonNeedVisible","loaderVision","add","name","scrollEl","mediaFiles","i","file","ppp","cildHeight"],"mappings":"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"}